import{Da as D,Ea as O,G as u,H as r,Ha as M,K as S,Ka as j,O as v,R as x,T as w,W as b,X as T,Y as o,Z as s,a as d,aa as R,b as g,ba as P,ca as c,da as h,ea as p,h as L,na as U,r as y,sa as I,u as a,va as E,wa as k}from"./chunk-OJQS4K4K.js";var V="https://swapi.dev/api/";function te(e,i){return E(()=>{let t=u(void 0);return(async()=>{if(e!==null){let n=await fetch(e),l=await n.json();if(n.ok)return t.set(i?await i(l):l)}return t.set(null)})(),t.asReadonly()})}function H(e){let{url:i,created:t,edited:n}=e,l=`swapi${i.slice(V.length).split("/").filter(_=>!!_).join("/")}`;return g(d({},e),{id:l,url:new URL(i),created:new Date(t),edited:new Date(n)})}function G(e){let{previous:i,next:t}=e;return g(d({},e),{previous:i!=null?new URL(i):null,next:t!==null?new URL(t):null})}function q(e){let{homeworld:i,films:t,species:n,starships:l,vehicles:_}=e;return g(d(d({},e),H(e)),{homeworld:i!==null?new URL(i):null,films:t.map(m=>new URL(m)),species:n.map(m=>new URL(m)),starships:l.map(m=>new URL(m)),vehicles:_.map(m=>new URL(m))})}function ie(e){let i=G(e),{results:t}=i;return g(d({},i),{results:t.map(q)})}function C(e){return e?{name:e.name||"",classification:e.classification||"",designation:e.designation||"",average_height:e.average_height||"",skin_colors:e.skin_colors||"",hair_colors:e.hair_colors||"",eye_colors:e.eye_colors||"",average_lifespan:e.average_lifespan||"",homeworld:e.homeworld||"",language:e.language||"",people:e.people||[],films:e.films||[],created:e.created||"",edited:e.edited||"",url:e.url||""}:{}}function N(e){return!e||!Array.isArray(e.results)?(console.warn("Invalid species list format:",e),[]):e.results.map(i=>C(i))}function z(e){return{name:e.name||"",rotation_period:e.rotation_period||"",orbital_period:e.orbital_period||"",diameter:e.diameter||"",climate:e.climate||"",gravity:e.gravity||"",terrain:e.terrain||"",surface_water:e.surface_water||"",population:e.population||"",residents:e.residents||[],films:e.films||[],created:e.created||"",edited:e.edited||"",url:e.url||""}}function ne(e){return e.results.map(i=>z(i))}var f=class e{http=a(O);baseUrl="https://swapi.dev/api/species/";getSpeciesList(i){let t=i||this.baseUrl;return this.http.get(t).pipe(L(n=>({results:N(n),next:n.next,previous:n.previous})))}getSpecies(i){return this.http.get(`${this.baseUrl}${i}/`).pipe(L(t=>(console.log("Raw API Data:",t),C(t))))}static \u0275fac=function(t){return new(t||e)};static \u0275prov=y({token:e,factory:e.\u0275fac,providedIn:"root"})};var J=e=>["/star-war/species",e],K=(e,i)=>i.url;function Q(e,i){e&1&&(o(0,"p"),c(1,"Loading species..."),s())}function W(e,i){if(e&1&&(o(0,"div",3)(1,"a",4)(2,"h3"),c(3),s()()()),e&2){let t=i.$implicit,n=i.$index;r(),x("routerLink",U(2,J,n+1)),r(2),h(t.name)}}var F=class e{speciesService=a(f);species=u([]);nextUrl=u(null);previousUrl=u(null);ngOnInit(){this.loadSpecies()}loadSpecies(i){this.speciesService.getSpeciesList(i).subscribe({next:t=>{this.species.set(t.results),this.nextUrl.set(t.next),this.previousUrl.set(t.previous)},error:t=>console.error("Error fetching species:",t)})}goToNextPage(){let i=this.nextUrl();i&&this.loadSpecies(i)}goToPreviousPage(){let i=this.previousUrl();i&&this.loadSpecies(i)}static \u0275fac=function(t){return new(t||e)};static \u0275cmp=S({type:e,selectors:[["app-sw-species-list"]],decls:11,vars:3,consts:[[1,"species-list"],[1,"pagination"],[3,"click","disabled"],[1,"species-item"],[3,"routerLink"]],template:function(t,n){t&1&&(o(0,"div",0)(1,"h2"),c(2,"Species List"),s(),o(3,"div",1)(4,"button",2),R("click",function(){return n.goToPreviousPage()}),c(5," Previous "),s(),o(6,"button",2),R("click",function(){return n.goToNextPage()}),c(7,"Next"),s()(),v(8,Q,2,0,"p"),b(9,W,4,4,"div",3,K),s()),t&2&&(r(4),x("disabled",!n.previousUrl()),r(2),x("disabled",!n.nextUrl()),r(2),w(n.species().length===0?8:-1),r(),T(n.species()))},dependencies:[D,j],styles:[".species-list[_ngcontent-%COMP%]{padding:20px}.species-item[_ngcontent-%COMP%]{border:1px solid #ccc;padding:10px;margin:10px 0}.pagination[_ngcontent-%COMP%]{margin-top:20px}button[_ngcontent-%COMP%]{padding:5px 10px;margin:0 5px}button[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}"],changeDetection:0})};function X(e,i){e&1&&(o(0,"p"),c(1,"Loading species details..."),s())}function Y(e,i){if(e&1&&(o(0,"h2"),c(1),s(),o(2,"p"),c(3),s(),o(4,"p"),c(5),s(),o(6,"p"),c(7),s(),o(8,"p"),c(9),s(),o(10,"p"),c(11),s(),o(12,"p"),c(13),s(),o(14,"p"),c(15),s(),o(16,"p"),c(17),s()),e&2){let t=P();r(),h(t.species().name),r(2),p("Classification: ",t.species().classification,""),r(2),p("Designation: ",t.species().designation,""),r(2),p("Average Height: ",t.species().average_height,"cm"),r(2),p("Skin Colors: ",t.species().skin_colors,""),r(2),p("Hair Colors: ",t.species().hair_colors,""),r(2),p("Eye Colors: ",t.species().eye_colors,""),r(2),p("Average Lifespan: ",t.species().average_lifespan,""),r(2),p("Language: ",t.species().language,"")}}var $=class e{route=a(M);speciesService=a(f);cdr=a(I);species=u(void 0);constructor(){k(()=>{console.log("species() updated:",this.species()),this.cdr.markForCheck()})}ngOnInit(){let i=this.route.snapshot.paramMap.get("id");console.log("Species ID from route:",i),i?this.speciesService.getSpecies(+i).subscribe({next:t=>{console.log("Fetched species data:",t),this.species.set(t)},error:t=>console.error("Error fetching species:",t)}):console.warn("No ID found in route parameters.")}static \u0275fac=function(t){return new(t||e)};static \u0275cmp=S({type:e,selectors:[["app-sw-species-view"]],decls:3,vars:1,consts:[[1,"species-view"]],template:function(t,n){t&1&&(o(0,"div",0),v(1,X,2,0,"p")(2,Y,18,9),s()),t&2&&(r(),w(n.species()?2:1))},encapsulation:2,changeDetection:0})};export{V as a,te as b,H as c,q as d,ie as e,z as f,ne as g,F as h,$ as i};
